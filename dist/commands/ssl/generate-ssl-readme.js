"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.readmeTemplate = void 0;
exports.readmeTemplate = `# SSL Certificates - Generated by Sarra CLI

This directory contains SSL/TLS certificates generated by the Sarra CLI tool.

## üìÅ What's in this directory?

### Certificate Files

For each domain, you'll find two files:

- **\`<domain>.crt\`** - SSL Certificate (public)

  - This is the certificate file that identifies your domain
  - Contains the public key
  - Safe to share with others if needed
  - Used by web servers to establish HTTPS connections

- **\`<domain>.key\`** - Private Key (secret)
  - ‚ö†Ô∏è **KEEP THIS SECRET!** Never share this file
  - Contains the private key that proves ownership of the certificate
  - Required by web servers to decrypt HTTPS traffic
  - Should have restricted file permissions (chmod 600)

## üîí Security Best Practices

### ‚ö†Ô∏è CRITICAL - Protect Your Private Keys

\`\`\`bash
# Set proper permissions (Linux/macOS)
chmod 600 *.key
chmod 644 *.crt

# Verify permissions
ls -la
\`\`\`

### üö´ Never Commit to Version Control

Add these files to your \`.gitignore\`:

\`\`\`gitignore
# SSL Certificates
*.key
*.crt
*.pem
certs/
ssl/

# Exception: You can commit .crt files if needed for team sharing
# But NEVER commit .key files
\`\`\`

### üîê Storage Recommendations

- Store private keys in secure, encrypted storage
- Use environment variables or secret managers in production
- Rotate certificates regularly (every 90-365 days)
- Keep backups in a secure location

## üìù How These Certificates Were Generated

### Self-Signed Certificates

Generated using the command:

\`\`\`bash
sarra ssl generate --domain <domain> --validity <days>
\`\`\`

**Technical Details:**

- **Algorithm:** RSA 2048-bit
- **Signature:** SHA-256
- **Format:** PEM (Privacy Enhanced Mail)
- **Validity:** Up to 365 days from generation date
- **Extensions:**
  - basicConstraints (CA:FALSE)
  - keyUsage (digitalSignature, keyEncipherment)
  - subjectAltName (DNS:<domain>)

**Trust Status:**

- ‚ùå Not trusted by browsers by default
- ‚ö†Ô∏è Will show "Not Secure" warning
- ‚úÖ Can be manually trusted on your development machine
- üéØ Perfect for local development and testing

### Let's Encrypt Certificates

If you obtained a certificate via Let's Encrypt:

\`\`\`bash
sarra ssl letsencrypt -d <domain> -e <email> --standalone
\`\`\`

**Location:**

- Certificate: \`/etc/letsencrypt/live/<domain>/fullchain.pem\`
- Private Key: \`/etc/letsencrypt/live/<domain>/privkey.pem\`

**Trust Status:**

- ‚úÖ Automatically trusted by all browsers
- ‚úÖ No security warnings
- üîÑ Auto-renews every 90 days
- üåç Works worldwide for all users

## üöÄ Using Your Certificates

### Node.js / Express

\`\`\`javascript
const https = require("https");
const fs = require("fs");
const express = require("express");

const app = express();

const options = {
  key: fs.readFileSync("./certs/localhost.key"),
  cert: fs.readFileSync("./certs/localhost.crt"),
};

https.createServer(options, app).listen(443, () => {
  console.log("HTTPS Server running on port 443");
});
\`\`\`

### Nginx

\`\`\`nginx
server {
    listen 443 ssl;
    server_name example.com;

    ssl_certificate /path/to/certs/example.com.crt;
    ssl_certificate_key /path/to/certs/example.com.key;

    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;

    location / {
        # Your configuration
    }
}
\`\`\`

### Apache

\`\`\`apache
<VirtualHost *:443>
    ServerName example.com

    SSLEngine on
    SSLCertificateFile /path/to/certs/example.com.crt
    SSLCertificateKeyFile /path/to/certs/example.com.key

    # Your configuration
</VirtualHost>
\`\`\`

### Docker / Docker Compose

\`\`\`yaml
version: "3.8"
services:
  web:
    image: nginx
    ports:
      - "443:443"
    volumes:
      - ./certs:/etc/nginx/certs:ro
    environment:
      - SSL_CERT=/etc/nginx/certs/example.com.crt
      - SSL_KEY=/etc/nginx/certs/example.com.key
\`\`\`

## üîß Trusting Self-Signed Certificates (Development Only)

To eliminate browser warnings during local development:

### macOS

\`\`\`bash
sudo security add-trusted-cert -d -r trustRoot \\
  -k /Library/Keychains/System.keychain \\
  ./localhost.crt
\`\`\`

Or double-click the \`.crt\` file and:

1. Add to "System" keychain
2. Double-click the cert in Keychain Access
3. Expand "Trust" ‚Üí Set to "Always Trust"

### Windows (PowerShell as Administrator)

\`\`\`powershell
certutil -addstore -f "ROOT" .\\localhost.crt
\`\`\`

Or double-click the \`.crt\` file and:

1. Install Certificate ‚Üí Local Machine
2. Place in "Trusted Root Certification Authorities"

### Linux (Ubuntu/Debian)

\`\`\`bash
sudo cp ./localhost.crt /usr/local/share/ca-certificates/
sudo update-ca-certificates
\`\`\`

### Firefox (All Platforms)

Firefox uses its own certificate store:

1. Settings ‚Üí Privacy & Security ‚Üí Certificates ‚Üí View Certificates
2. Authorities tab ‚Üí Import
3. Select your \`.crt\` file
4. Check "Trust this CA to identify websites"

## ‚ö†Ô∏è Important Warnings

### Self-Signed Certificates

‚ùå **DO NOT use for production websites**

- Visitors will see security warnings
- Not trusted by default on other machines
- Can be flagged as malicious by security software

‚úÖ **Perfect for:**

- Local development (https://localhost)
- Internal testing environments
- Development team shared certificates
- CI/CD pipelines

### Private Key Security

üö® **If your private key is compromised:**

1. Immediately stop using the certificate
2. Generate a new certificate and key pair
3. Update all services using the old certificate
4. Investigate how the key was exposed

üîí **Signs of compromise:**

- Unauthorized access to your servers
- Unexpected SSL/TLS errors
- Man-in-the-middle attack warnings

## üìä Certificate Information

To view certificate details:

\`\`\`bash
# View certificate information
openssl x509 -in example.com.crt -text -noout

# Check certificate expiry
openssl x509 -in example.com.crt -noout -dates

# Verify certificate and key match
openssl x509 -noout -modulus -in example.com.crt | openssl md5
openssl rsa -noout -modulus -in example.com.key | openssl md5
# These should produce the same hash
\`\`\`

## üîÑ Certificate Renewal

### Self-Signed Certificates

\`\`\`bash
# Generate a new certificate when the old one expires
sarra ssl generate --domain example.com --validity 365
\`\`\`

### Let's Encrypt Certificates

\`\`\`bash
# Test renewal (dry run)
certbot renew --dry-run

# Force renewal (if needed)
certbot renew --force-renewal

# Auto-renewal is typically handled by certbot's systemd timer
systemctl status certbot.timer
\`\`\`

## üìö Additional Resources

- [Sarra CLI Documentation](https://github.com/jordanovvvv/sarra-cli)
- [Let's Encrypt Documentation](https://letsencrypt.org/docs/)
- [Mozilla SSL Configuration Generator](https://ssl-config.mozilla.org/)
- [SSL Labs Server Test](https://www.ssllabs.com/ssltest/)

## üÜò Troubleshooting

### "NET::ERR_CERT_AUTHORITY_INVALID"

This is expected for self-signed certificates. Either:

- Trust the certificate manually (see instructions above)
- Use Let's Encrypt for production instead

### "Certificate has expired"

Generate a new certificate:

\`\`\`bash
sarra ssl generate --domain localhost --validity 365
\`\`\`

### "Unable to verify certificate"

Check that the certificate and key files match:

\`\`\`bash
openssl x509 -noout -modulus -in example.com.crt | openssl md5
openssl rsa -noout -modulus -in example.com.key | openssl md5
\`\`\`

### Server won't start with SSL

Common issues:

- Wrong file paths in server configuration
- Incorrect file permissions (private key should be 600)
- Port 443 already in use
- Missing intermediate certificates (use fullchain.pem for Let's Encrypt)

---

**Generated by [Sarra CLI](https://github.com/jordanovvvv/sarra-cli)**  
_Making SSL/TLS certificate generation simple for developers_
`;
